<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{{ fighter.name }} | Profile</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/fighter_profile.css') }}">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="{{ url_for('static', filename='js/script.js') }}" defer></script>



</head>
<body>

<!-- Navbar -->
<nav class="navbar">
  <div class="navbar-container">
    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="TruLogo" class="logo" />

    <!-- Burger Icon (For mobile) -->
  <i class="fas fa-bars burger" id="burger"></i>



    <!-- Navigation Links -->
    <ul class="nav-links" id="navLinks">
      <li><a href="/">Home</a></li>
      <li><a href="{{ url_for('events_page') }}">EVENTS</a></li>
      <li><a href="{{ url_for('fighters_page') }}">FIGHTERS</a></li>
      <li><a href="/merchandise">MERCHANDISE</a></li>
      <li><a href="/sponsors">SPONSORS</a></li>
      <li><a href="/contact">CONTACT US</a></li>
    </ul>
  </div>
</nav>

<!-- HERO SECTION with background -->
<div class="fighter-hero" style="background-image: url('{{ url_for('static', filename='images/bg-ring.png') }}');">
  <div class="profile-container">
    <div class="profile-left">
      <img src="{{ url_for('static', filename='images/fighters/' + fighter.image_profile) }}" alt="{{ fighter.name }}" />
    </div>

    <div class="profile-right">
      <h1>{{ fighter.name }}{% if fighter.nickname %} “{{ fighter.nickname }}”{% endif %}</h1>
      <h3>{{ fighter.weight_class }}</h3>

      <div class="stats">
        <div><strong>{{ fighter.wins }}</strong> <span>WINS</span></div>
        <div><strong>{{ fighter.losses }}</strong> <span>LOSSES</span></div>
        <div><strong>{{ fighter.draws }}</strong> <span>DRAWS</span></div>
        <div><strong>{{ fighter.kos }}</strong> <span>KOs</span></div>
      </div>

      <hr>

      <ul class="details">
        <li><strong>AGE:</strong> {{ fighter.age }}</li>
        <li><strong>HEIGHT:</strong> {{ fighter.height }}</li>
        <li><strong>STANCE:</strong> {{ fighter.stance }}</li>
        <li>
          <strong>COUNTRY:</strong> {{ fighter.country }}
          <img src="{{ url_for('static', filename='images/flags/' + fighter.country|lower|replace(' ', '_') + '.png') }}"
               alt="{{ fighter.country }} flag"
               class="flag-icon" />
        </li>
      </ul>
    </div>
  </div>
</div>

<!-- DESCRIPTION SECTION -->
<div class="fighter-description-block">
  <h2><em>{{ fighter.name }}</em>{% if fighter.nickname %} — “{{ fighter.nickname }}”{% endif %}</h2>
  <p>{{ fighter.description }}</p>
</div>

<div class="fight-history">
  <h2>FIGHT HISTORY</h2>
  <table>
    <thead>
      <tr>
        <th>Result</th>
        <th>Opponent</th>
        <th>Date</th>
        <th>Method</th>
        <th>Notes</th>
      </tr>
    </thead>
    <tbody id="fight-history-body">
      {% for bout in fighter.fight_history[:5] %}
      <tr>
        <td>
          <span class="result {{ bout.result | lower }}">
            {{ bout.result }}
          </span>
        </td>
        <td>{{ bout.opponent }}</td>
        <td>{{ bout.date }}</td>
        <td>{{ bout.method }}</td>
        <td>{{ bout.org }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if fighter.fight_history|length > 5 %}
  <div class="show-more-container">
    <button id="show-more-btn">Show More</button>
  </div>
  {% endif %}
</div>

<section class="px-4 md:px-12 lg:px-32 py-10">
  <h2 class="text-white text-3xl font-extrabold mb-6">Gallery</h2>
  <div class="gallery-masonry">
    {% for image in fighter.gallery %}
      <div class="image-wrapper">
        <img src="{{ url_for('static', filename='images/' ~ image) }}" alt="Gallery Image">
      </div>
    {% endfor %}
  </div>
</section>

<script>
  const showMoreBtn = document.getElementById('show-more-btn');
  const tbody = document.getElementById('fight-history-body');
  let expanded = false;

  {% if fighter.fight_history|length > 5 %}
  const fullHistory = {{ fighter.fight_history | tojson }};
  const extraHistory = fullHistory.slice(5);
  {% endif %}

  if (showMoreBtn) {
    showMoreBtn.addEventListener('click', () => {
      if (!expanded) {
        extraHistory.forEach(bout => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td><span class="result ${bout.result.toLowerCase()}">${bout.result}</span></td>
            <td>${bout.opponent}</td>
            <td>${bout.date}</td>
            <td>${bout.method}</td>
            <td>${bout.org}</td>
          `;
          tbody.appendChild(row);
        });
        showMoreBtn.textContent = 'Show Less';
        expanded = true;
      } else {
        while (tbody.rows.length > 5) {
          tbody.deleteRow(5);
        }
        showMoreBtn.textContent = 'Show More';
        expanded = false;
      }
    });
  }
</script>

</body>
</html>
